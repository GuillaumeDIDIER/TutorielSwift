\chapter{Les Conditions}
\section{Si ... Alors... Sinon ...}
\emph{<< C'est bien joli, les booléens, mais à quoi servent-ils ? >>}
Une première utilisation des booléens est le <<\emph{branchement conditionnel}>>.
\subsection{Exécuter des instructions uniquement lorsque une condition est vérifiée}
On va prendre un exemple, on suppose que vous avez obtenu de l'utilisateur deux nombres a et b, stockés dans deux variables, pour calculer le quotient $\frac{a}{b}$.
Cependant, si b est nul, vous ne pouvez pas effectuer la division. (En fait en Swift, avec des nombres à virgule vous obtiendrez $\pm infinty$

On se propose de vérifier si b est nul et d'écrire un message à la console dans ce cas.

Grâce aux sections précedentes vous pouvez me trouver le condition correspondante.

\pagebreak % No cheating
\mintinline{swift}{b == 0}, comme vous avez tous trouvé (sans tricher).

Pour executer \mintinline{swift}{println("b est nul ! Division impossible")}, nous allons utiliser notre première instruction composée : \mintinline{swift}{if}

\begin{listing}[h]
\begin{minted}[linenos]{swift}
let b = 0
if b == 0 /*Condition, non nécessairement entre parenthèse*/{
    // Code à exécuter si la conditions est vérifié
    // Éventuellement plusieurs instructions.
    println("b est nul ! Division impossible")
} // Les accolades ouvrantes et fermantes pourraient respectivement
  // être mise une ligne après le if,
  // ou sur la même ligne que la dernière instruction.
// Code exécuté dans tout les cas.
\end{minted}
\caption{la syntaxe de if}
\end{listing}
\paragraph{Deux commentaires pour ceux qui ont déjà programmé
dans un langage utilisant la syntaxe du C :}
\begin{itemize}
\item Les parenthèses autour de la condition ne sont pas nécessaires,
et sont en général omise dans la doc d'Apple.
\item Les accolades ne peuvent par contre pas être omise,
même s'il n'y a qu'un instruction à exécuter.
\end{itemize}
\subsection{Et dans le cas contraire ?}
Évidement maintenenant que l'on  a testé la valeur de b, il faut n'exécuter la division que si b est non nul.
La solution que vous pourriez envisager est de faire ensuite
\mintinline{swift}{if b != 0},
mais il existe une solution plus claire : \mintinline{swift}{else}
\begin{listing}[h]
\begin{minted}[linenos]{swift}
let b = 0
if b == 0 /*Condition, non nécessairement entre parenthèse*/{
    // Code à exécuter si la conditions est vérifié
    // Éventuellement plusieurs instructions.
    println("b est nul ! Division impossible")
} else { // Même commentaire que précédement pour les accolades.
    println("a/b = \( a/b )")
    // Code exécuté dans le cas contraire.
}
// Code exécuté dans tout les cas.
\end{minted}
\caption{la syntaxe de if}
\end{listing} %\)

Il est bien sur possible d'imbriquer des if à l'intérieur des accolades.
\subsection{Else if, exécuter des tests plus complexes}
Il est enfin possible de traiter des cas plus complexe avec l'idiome \mintinline{swift}{else if}, << sinon si >> :
\begin{listing}[h]
if condition1 {
    // code à exécuter si 1 est vérifiée.
}
else if condition 2
{
    // code à exécuter si 1 n'est pas vrai et que 2 est vrai.
} else if condition 3 {
    // code à exécuter si 1 et 2 fausses et 3 vrai 
}
/* ... Avec autant de codition nécéssaires */
/* De façon optionelle, un unique else, à exécuter si aucune des condition n'a été vérifiée. */
else {
    // code à exécuter si aucune  condition n'est vérifié.
}
// Code à exécuter dans tout les cas.

\caption{if, else if, else}
\end{listing}
\section{Quelques généralités sur les instructions composée}
Lorsque vous voyez apparaître de accolades, vous entrez dans un nouveau bloc de code, dans ce bloc, toutes les variables que vous déclarerez ne serons déclarés que dans ce bloc, et ne seront plus accessible une fois que vous en serez sorti. On parle de variable locales. Dans certain cas une variable locale est définie sur la ligne introduisant l'instruction composée.

On peut, par contre, accéder aux variables définis à l'extérieur de ce bloc, dite globales.
\section{Application : Une année est elle bissextile ?}
Après un chapitre quelque peu théorique, je vous propose un premier exercice intéressant :
\subsection{Consignes}
Je vous demande d'écrire un code qui déclare une constante contenant une année
(que vous changerez pour tester le programme),
puis détermine si cette année est bissextile,
en affichant sur la sortie standard l'information.

Je rappelle à toute fin utile qu'une année sur quatre est bissextile,
sauf pour les années qui sont un multiple de 100, qui ne sont pas bissextile,
sauf (encore un exception !) lorsque qu'elles sont multiple de 400.
\subsection{Indications}
\begin{itemize}

\item N'oubliez pas l'assommant cours de méthodologie que je vous ai servi en introduction.

\item Pour savoir si un nombre est multiple d'un autre,
rien de mieux que le reste de la division euclidienne.

\item Un ou plusieurs if (et éventuellement else), comme vous voulez.
\end{itemize}
\pagebreak % Let's not cheat
\subsection{Corrections}
Je vous mets ici plusieurs corrections successives,
de la moins bonne à la meilleure, même si les 4 sont justes.

\begin{listing}[h!]
\begin{minted}[linenos]{swift}
let année = 2015
if année % 4 == 0 {
    if année % 100 == 0 {
        if année % 400 == 0 {
            println("Bissextile")
        } else {
            println("Pas bissextile")
        }
    } else {
        println("Bissextile")
    }
} else {
    println("Pas Bissextile")
}
\end{minted}
\caption{Méthode bourrin}
\end{listing}
Ce n'est pas la méthode la plus lisible,
même si c'est la plus évidente pour le débutant.

\begin{listing}[h!]
\begin{minted}[linenos]{swift}
let année = 2000 // Attention BUG ! ;)
if année % 400 == 0 {
    println("Bissextile")
} else if année % 100 == 0 {
    println("Pas Bissextile")
} else if année % 4 == 0 {
    println("Bissextile")
} else {
    pintln("Pas Bissextile")
}
\end{minted}
\caption{Un peu plus élégant}
\end{listing}
C'est un peu moins brouillon, mais (comme précédemment), on duplique les lignes <<bissextile>> et <<pas bissextile>>, ce qui n'est pas génial. De plus pour une année non multiple de 4 (a priori le plus fréquent), on effectue tout les tests alors que l'on pourrait conclure immédiatement.

\begin{listing}[h!]
\begin{minted}[linenos]{swift}
let année = 1995
if année % 4 != O {
    println("Pas Bissextile")
} else if année % 100 != 0 {
    println("Bissextile")
} else if année % 400 != 0 {
    println("Pas Bissextile")
} else {
    println("Bissextile")
}
\end{minted}
\caption{Méthode élégante optimisée}
\end{listing}
Voilà qui est plus optimisé, mais il reste à résoudre la duplication de code :

\begin{listing}[h!]
\begin{minted}[linenos]{swift}
let année = 2042 // Attention, Geek !
if année % 4 != 0 || (année % 100 == 0 && année % 400 != 0) {
    println("Pas Bissextile")
} else {
    println("Bissextile")
}
\end{minted}
\caption{Méthode experte !}
\end{listing}

Je vous conseil de ne pas attaquer le chapitre suivant
si vous ne comprenez pas ces quatre correction,
et sans avoir essayé les petits exercices facile qui suivent.
\subsection{Variantes}
Essayez de refaire cela:
\begin{itemize}

\item En affichant l'année si ce n'est pas déjà fait.
\item En stockant l'information dans un booléen.
\item En n'obtenant cela sans if, juste avec un grosse condition.

\end{itemize}
\section{Switch...case}
\subsection{Effectuer un disjonction de cas}
Il existe une deuxième syntaxe permettant de créer des branchements :
\mintinline{swift}{switch...case}.
Il s'agit de choisir un bloc à exécuter selon la valeur d'une variable.
\paragraph{Remarque :}Cette Syntaxe diffère de celle du C de façon importante.


En effet en Swift, il faut que toux les cas soient traités.
\begin{listing}{h}
\begin{minted}[linenos]{swift}
switch(<variable>){
case <valeur1> :
    // Code exécuté pour la valeur 1
    // IL ne peut pas y avoir de code vide.
case <valeur2>, <valeur3>:
    // Il est possible de lister plusieurs valeurs.
    // Code exécuté pour les valeurs 2 et 3
default :
    // Code exécuté pour tous les autres cas.
    // Il peut être omis s'il y a un nombre fini de cas.

}
\end{minted}
\caption{Syntaxe basique de switch}
\end{listing}
\subsection{Exprimer des cas plus complexes}
%TODO 
